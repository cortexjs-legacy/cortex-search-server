mixin css(path)
    link(href="#{path}" rel="stylesheet")
mixin js(path)
    script(type="text/javascript" src="#{path}")

mixin mod
    .mod(ng-repeat="package in pkgs" ng-click="viewDetail(package)" ng-class="{'mod-selected': pkg.name==package.name}")
        .mask
        .name {{package.name}}
        //- .meta
        //-     .star 200
        //-     .download 298
        .desc
            | {{package.description}}
            //- a.url {{package.url}}

mixin meta(title,icon,link)
    .meta
        i(class="icon-" + icon)
        span.title #{title}
        span.pull-right #{link}

doctype html
html(ng-app="app")
    head
        meta(charset="utf-8")
        title Cortex Search
        +css("/css/lib/animate.css")
        +css("/css/search.css")
        +css("/css/readme.css")
        +js("/js/lib/angular.js")
        +js("/js/lib/marked.js")
        +js("/js/search.js")
    body(ng-controller="Controller")
        .head
            .logo
                img(src="/img/logo.png")
            .search
                i.icon-search
                input.input(ng-model="searchInput" ng-enter="search()" placeholder="keyword:ajax|name:jquery|author:ltebean")
                i.icon-close(ng-show="searchInput" ng-click="clearInput()")
            span.msg(ng-show="msg") {{msg}}
        .content(ng-show="pkg")
            .mods
                +mod
            .detail
                div(id="top")
                .block.header
                    .author
                        img.avatar(ng-src="{{pkg.author.avatarMedium}}")
                    .desc
                        .title {{pkg.name}}
                        .info by &nbsp
                            span.name {{pkg.author.name}} 
                            span.date {{pkg.time.modified | date:MMM-dd-yyyy}}
                .block.intro
                    |{{pkg.description}} 
                .block.readme 
                    .title README
                    .content(ng-bind-html-unsafe="marked(pkg.readmeSrc)")
            .metas
                .top 
                +meta("Repo","repo","{{pkg.repository.url}}")              
                +meta("Home","home","{{pkg.homepage}}")              
                +meta("Issues","bug","{{pkg.bugs.url}}")              
                .tags
                    .title Keywords
                    div
                        a.tag(href="javascript:;" ng-repeat="keyword in pkg.keywords" ng-click="searchByKeyword(keyword)") {{keyword}}
                .tags
                    .title Dependencies
                    div
                        a.tag(href="javascript:;" ng-repeat="(dependency,version) in pkg.dependencies" ng-click="searchByName(dependency)") {{dependency}}
                .maintainers.maintainers
                    .title Maintainers
                    .avatars
                        img.avatar-sm(ng-repeat="maintainer in pkg.maintainers" ng-src="{{maintainer.avatarMedium}}")