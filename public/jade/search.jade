mixin css(path)
    link(href="#{path}" rel="stylesheet")
mixin js(path)
    script(type="text/javascript" src="#{path}")

mixin mod
    .mod(ng-repeat="package in pkgs" ng-click="viewDetail(package)" ng-class="{'mod-selected': pkg.name==package.name}")
        .name {{package.name}}
        //- .meta
        //-     .star 200
        //-     .download 298
        .desc
            | {{package.description}}
            //- a.url {{package.url}}

mixin meta(title,icon,link)
    .meta
        i(class="icon-" + icon)
        span.title #{title}
        span.pull-right #{link}

doctype html
html(ng-app="app")
    head
        meta(charset="utf-8")
        title Cortex Search
        +css("/css/search.css")
        +css("/css/readme.css")
        +js("/js/lib/marked.js")
        +js("/js/lib/angular.js")
        +js("/js/search.js")
    body(ng-controller="Controller")
        .head
            .logo
                img(src="/img/logo.png")
            .search
                i.icon-search
                input.input(ng-model="searchInput" ng-enter="search()" placeholder="keyword:ajax|name:jquery|author:ltebean")
                i.icon-close
        .content
            .mods
                +mod
            .detail
                div(ng-show="pkg")
                    .block.header 
                        .author
                            img.avatar(src="https://avatars0.githubusercontent.com/u/1646564?s=460")
                        .desc
                            .title {{pkg.name}}
                            .info by &nbsp
                                a {{pkg.author.name}} 
                                span.date {{pkg.time.modified | date:MMM-dd-yyyy}}
                    .block.intro
                        |{{pkg.description}} 
                    .block.readme 
                        .title README
                        .content(ng-bind-html-unsafe="readme")
            .metas
                div(ng-show="pkg")
                    .top 
                    +meta("Repo","repo","{{pkg.repository.url}}")              
                    +meta("Home","home","{{pkg.homepage}}")              
                    +meta("Issues","bug","{{pkg.bugs.url}}")              
                    .tags
                        .title Keywords
                        div
                            .tag(ng-repeat="keyword in pkg.keywords") {{keyword}}
                    .maintainers
                        .title Maintainers
                        .avatars
                            img.avatar-sm(ng-repeat="maintainer in pkg.maintainers" ng-src="{{getGravatar(maintainer.email,460)}}")
